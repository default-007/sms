{% extends "base.html" %}
{% load static %}

{% block title %}{% if form.instance.pk %}Edit Teacher{% else %}Add Teacher{% endif %}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>{% if form.instance.pk %}Edit Teacher{% else %}Add Teacher{% endif %}</h2>
    <a href="{% if form.instance.pk %}{% url 'teacher-detail' form.instance.pk %}{% else %}{% url 'teacher-list' %}{% endif %}"
      class="btn btn-outline-secondary">
      <i class="fas fa-arrow-left"></i> Back
    </a>
  </div>

  <div class="card">
    <div class="card-header bg-light">
      <h5 class="mb-0">Teacher Information</h5>
    </div>
    <div class="card-body">
      <form method="post" enctype="multipart/form-data" novalidate>
        {% csrf_token %}

        <div class="row mb-4">
          <div class="col-12">
            <h6 class="fw-bold text-primary mb-3">Personal Information</h6>
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name <span
                class="text-danger">*</span></label>
            {{ form.first_name }}
            {% if form.first_name.errors %}
            <div class="invalid-feedback d-block">
              {{ form.first_name.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name <span
                class="text-danger">*</span></label>
            {{ form.last_name }}
            {% if form.last_name.errors %}
            <div class="invalid-feedback d-block">
              {{ form.last_name.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.email.id_for_label }}" class="form-label">Email <span
                class="text-danger">*</span></label>
            {{ form.email }}
            {% if form.email.errors %}
            <div class="invalid-feedback d-block">
              {{ form.email.errors }}
            </div>
            {% endif %}
            <small class="text-muted">This will be used as the username for login</small>
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.phone_number.id_for_label }}" class="form-label">Phone Number</label>
            {{ form.phone_number }}
            {% if form.phone_number.errors %}
            <div class="invalid-feedback d-block">
              {{ form.phone_number.errors }}
            </div>
            {% endif %}
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-12">
            <h6 class="fw-bold text-primary mb-3">Employment Information</h6>
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.employee_id.id_for_label }}" class="form-label">Employee ID <span
                class="text-danger">*</span></label>
            {{ form.employee_id }}
            {% if form.employee_id.errors %}
            <div class="invalid-feedback d-block">
              {{ form.employee_id.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.joining_date.id_for_label }}" class="form-label">Joining Date <span
                class="text-danger">*</span></label>
            {{ form.joining_date }}
            {% if form.joining_date.errors %}
            <div class="invalid-feedback d-block">
              {{ form.joining_date.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.department.id_for_label }}" class="form-label">Department</label>
            {{ form.department }}
            {% if form.department.errors %}
            <div class="invalid-feedback d-block">
              {{ form.department.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.position.id_for_label }}" class="form-label">Position <span
                class="text-danger">*</span></label>
            {{ form.position }}
            {% if form.position.errors %}
            <div class="invalid-feedback d-block">
              {{ form.position.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.salary.id_for_label }}" class="form-label">Salary <span
                class="text-danger">*</span></label>
            {{ form.salary }}
            {% if form.salary.errors %}
            <div class="invalid-feedback d-block">
              {{ form.salary.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.contract_type.id_for_label }}" class="form-label">Contract Type <span
                class="text-danger">*</span></label>
            {{ form.contract_type }}
            {% if form.contract_type.errors %}
            <div class="invalid-feedback d-block">
              {{ form.contract_type.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-4 mb-3">
            <label for="{{ form.status.id_for_label }}" class="form-label">Status <span
                class="text-danger">*</span></label>
            {{ form.status }}
            {% if form.status.errors %}
            <div class="invalid-feedback d-block">
              {{ form.status.errors }}
            </div>
            {% endif %}
          </div>
        </div>

        <div class="row mb-4">
          <div class="col-12">
            <h6 class="fw-bold text-primary mb-3">Qualifications & Expertise</h6>
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.qualification.id_for_label }}" class="form-label">Qualification <span
                class="text-danger">*</span></label>
            {{ form.qualification }}
            {% if form.qualification.errors %}
            <div class="invalid-feedback d-block">
              {{ form.qualification.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.specialization.id_for_label }}" class="form-label">Specialization <span
                class="text-danger">*</span></label>
            {{ form.specialization }}
            {% if form.specialization.errors %}
            <div class="invalid-feedback d-block">
              {{ form.specialization.errors }}
            </div>
            {% endif %}
          </div>
          <div class="col-md-6 mb-3">
            <label for="{{ form.experience_years.id_for_label }}" class="form-label">Experience (Years) <span
                class="text-danger">*</span></label>
            {{ form.experience_years }}
            {% if form.experience_years.errors %}
            <div class="invalid-feedback d-block">
              {{ form.experience_years.errors }}
            </div>
            {% endif %}
          </div>
        </div>

        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Save Teacher
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  // Add Bootstrap's form-control class to all inputs
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('input, select, textarea').forEach(function (el) {
      if (!el.classList.contains('form-control') && !el.classList.contains('form-check-input') && !el.classList.contains('form-select')) {
        if (el.getAttribute('type') === 'checkbox' || el.getAttribute('type') === 'radio') {
          el.classList.add('form-check-input');
        } else if (el.tagName === 'SELECT') {
          el.classList.add('form-select');
        } else {
          el.classList.add('form-control');
        }
      }
    });
  });
</script>
{% endblock %}