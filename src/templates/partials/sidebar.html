{% load static %}
<aside class="side-mini-panel with-vertical">
  <!-- ---------------------------------- -->
  <!-- Start Vertical Layout Sidebar -->
  <!-- ---------------------------------- -->
  <div class="iconbar">
    <div>
      <div class="mini-nav">
        <div class="brand-logo d-flex align-items-center justify-content-between justify-content-lg-center">
          <a href="/" class="text-nowrap logo-img">
            <img src="{% static 'assets/images/logos/logo-icon.svg' %}" alt="Logo" />
          </a>
          <a href="javascript:void(0)"
            class="sidebartoggler close-btn ms-auto text-decoration-none fs-5 d-flex d-xl-none align-items-center justify-content-center text-danger">
            <i class="material-symbols-outlined fs-5">cancel</i>
          </a>
        </div>
        <ul class="mini-nav-ul" data-simplebar>
          <!-- Dashboard -->
          <li class="mini-nav-item" id="mini-1">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Dashboard">
              <i class="fas fa-tachometer-alt" style="color: #3B82F6;"></i>
            </a>
          </li>
          <!-- People Management -->
          <li class="mini-nav-item" id="mini-2">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="People Management">
              <i class="fas fa-users" style="color: #10B981;"></i>
            </a>
          </li>
          <!-- Academic Management -->
          <li class="mini-nav-item" id="mini-3">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Academic Management">
              <i class="fas fa-graduation-cap" style="color: #8B5CF6;"></i>
            </a>
          </li>
          <!-- Learning & Assessment -->
          <li class="mini-nav-item" id="mini-4">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Learning & Assessment">
              <i class="fas fa-book-open" style="color: #F59E0B;"></i>
            </a>
          </li>
          <li><span class="sidebar-divider lg"></span></li>
          <!-- Finance & Fees -->
          <li class="mini-nav-item" id="mini-5">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Finance & Fees">
              <i class="fas fa-dollar-sign" style="color: #059669;"></i>
            </a>
          </li>
          <!-- Operations -->
          <li class="mini-nav-item" id="mini-6">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Operations">
              <i class="fas fa-cogs" style="color: #6366F1;"></i>
            </a>
          </li>
          <!-- Communications -->
          <li class="mini-nav-item" id="mini-7">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Communications">
              <i class="fas fa-comments" style="color: #EC4899;"></i>
            </a>
          </li>
          <!-- Reports & Analytics -->
          <li class="mini-nav-item" id="mini-8">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="Reports & Analytics">
              <i class="fas fa-chart-bar" style="color: #14B8A6;"></i>
            </a>
          </li>
          <!-- System Administration -->
          <li class="mini-nav-item" id="mini-9">
            <a href="javascript:void(0)" data-bs-toggle="tooltip" data-bs-custom-class="custom-tooltip"
              data-bs-placement="right" data-bs-title="System Administration">
              <i class="fas fa-tools" style="color: #EF4444;"></i>
            </a>
          </li>
        </ul>
        <ul class="mt-auto mb-4">
          <li class="dropup">
            <a href="javascript:void(0)" id="drop1" data-bs-toggle="dropdown" aria-expanded="false">
              {% if user.profile_picture %}
              <div
                class="d-flex align-items-center justify-content-center gap-2 lh-base hover-border p-1 mx-auto rounded-circle"
                width="35">
                <img src="{{ user.profile_picture.url }}" class="rounded-circle" width="35" height="35" alt="Profile" />
              </div>
              {% else %}
              <div
                class="d-flex align-items-center justify-content-center gap-2 lh-base hover-border p-1 mx-auto rounded-circle"
                width="35">
                <img src="{% static 'assets/images/profile/user-1.jpg' %}" class="rounded-circle" width="35" height="35"
                  alt="Profile" />
              </div>
              {% endif %}
            </a>
            <div class="dropdown-menu content-dd dropdown-menu-end dropdown-menu-animate-up shadow-lg"
              aria-labelledby="drop1">
              <div class="profile-dropdown position-relative" data-simplebar>
                <div class="py-3 px-7 pb-0">
                  <h5 class="mb-0 fs-5 fw-semibold">User Profile</h5>
                </div>
                <div class="d-flex align-items-center py-9 mx-7 border-bottom">
                  {% if user.profile_picture %}
                  <img src="{{ user.profile_picture.url }}" class="rounded-circle" width="80" height="80"
                    alt="Profile" />
                  {% else %}
                  <img src="{% static 'assets/images/profile/user-1.jpg' %}" class="rounded-circle" width="80"
                    height="80" alt="Profile" />
                  {% endif %}
                  <div class="ms-3">
                    <h5 class="mb-0 fs-4">{{ user.get_full_name|default:user.username }}</h5>
                    {% for role_assignment in user_roles %}
                    <span class="mb-1 d-block">{{ role_assignment.role.name }}</span>
                    {% endfor %}
                    <p class="mb-0 d-flex align-items-center gap-2">
                      <i class="ti ti-mail fs-4"></i> {{ user.email }}
                    </p>
                  </div>
                </div>
                <div class="message-body">
                  <a href="{% url 'accounts:profile' %}" class="py-8 px-7 mt-8 d-flex align-items-center">
                    <span
                      class="d-flex align-items-center justify-content-center bg-primary-subtle text-primary rounded round">
                      <i class="fas fa-user-circle fs-7"></i>
                    </span>
                    <div class="w-75 v-middle ps-3">
                      <h5 class="mb-1 fs-3 fw-medium">My Profile</h5>
                      <span class="fs-2 d-block text-body-secondary">Account Settings</span>
                    </div>
                  </a>
                </div>
                <div class="d-grid py-4 px-7 pt-8">
                  <a href="{% url 'accounts:logout' %}" class="btn btn-primary">Log Out</a>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>

      <div class="sidebarmenu">
        <!-- ================================== -->
        <!-- üè† Dashboard -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-1" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üè† Dashboard</span>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
                href="{% url 'core:dashboard' %}" aria-expanded="false">
                <i class="fas fa-tachometer-alt" style="color: #3B82F6;"></i>
                <span class="hide-menu">Main Dashboard</span>
              </a>
            </li>
            <li class="sidebar-item">
              <a class="sidebar-link" href="{% url 'core:analytics' %}" aria-expanded="false">
                <i class="fas fa-chart-pie" style="color: #3B82F6;"></i>
                <span class="hide-menu">Analytics Overview</span>
              </a>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üë• People Management -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-2" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üë• People Management</span>
            </li>

            <!-- Students Section -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-user-graduate" style="color: #10B981;"></i>
                <span class="hide-menu">Students</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:student-list' %}">
                    <i class="fas fa-list" style="color: #34D399;"></i>
                    Student Directory
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:student-create' %}">
                    <i class="fas fa-user-plus" style="color: #34D399;"></i>
                    Add Student
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:quick-student-create' %}">
                    <i class="fas fa-bolt" style="color: #34D399;"></i>
                    Quick Add
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:promotion' %}">
                    <i class="fas fa-level-up-alt" style="color: #34D399;"></i>
                    Student Promotion
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:student-import' %}">
                    <i class="fas fa-file-import" style="color: #34D399;"></i>
                    Bulk Import
                  </a>
                </li>
              </ul>
            </li>

            <!-- Teachers Section -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-chalkboard-teacher" style="color: #10B981;"></i>
                <span class="hide-menu">Teachers</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'teachers:teacher-list' %}">
                    <i class="fas fa-list" style="color: #34D399;"></i>
                    Teacher Directory
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'teachers:teacher-create' %}">
                    <i class="fas fa-user-tie" style="color: #34D399;"></i>
                    Add Teacher
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'teachers:teacher-dashboard' %}">
                    <i class="fas fa-chart-line" style="color: #34D399;"></i>
                    Teacher Analytics
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'teachers:teacher-performance' %}">
                    <i class="fas fa-star" style="color: #34D399;"></i>
                    Performance Reports
                  </a>
                </li>
              </ul>
            </li>

            <!-- Parents Section -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-users" style="color: #10B981;"></i>
                <span class="hide-menu">Parents</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:parent-list' %}">
                    <i class="fas fa-list" style="color: #34D399;"></i>
                    Parent Directory
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'students:parent-create' %}">
                    <i class="fas fa-user-plus" style="color: #34D399;"></i>
                    Add Parent
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="">
                    <i class="fas fa-link" style="color: #34D399;"></i>
                    Link Relationships
                  </a>
                </li>
              </ul>
            </li>

            <!-- Users & Roles Section -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-users-cog" style="color: #10B981;"></i>
                <span class="hide-menu">Users & Roles</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'accounts:user_list' %}">
                    <i class="fas fa-users" style="color: #34D399;"></i>
                    User Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'accounts:role_list' %}">
                    <i class="fas fa-key" style="color: #34D399;"></i>
                    Role Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'accounts:bulk_action' %}">
                    <i class="fas fa-tasks" style="color: #34D399;"></i>
                    Bulk Actions
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üéì Academic Management -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-3" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üéì Academic Management</span>
            </li>

            <!-- Academic Structure -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-sitemap" style="color: #8B5CF6;"></i>
                <span class="hide-menu">Academic Structure</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:structure' %}">
                    <i class="fas fa-eye" style="color: #A78BFA;"></i>
                    Structure Overview
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:department-list' %}">
                    <i class="fas fa-building" style="color: #A78BFA;"></i>
                    Departments
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:section-list' %}">
                    <i class="fas fa-layer-group" style="color: #A78BFA;"></i>
                    Sections
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:grade-list' %}">
                    <i class="fas fa-stairs" style="color: #A78BFA;"></i>
                    Grades
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:class-list' %}">
                    <i class="fas fa-door-open" style="color: #A78BFA;"></i>
                    Classes
                  </a>
                </li>
              </ul>
            </li>

            <!-- Academic Years & Terms -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-calendar-alt" style="color: #8B5CF6;"></i>
                <span class="hide-menu">Academic Calendar</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:academic-year-list' %}">
                    <i class="fas fa-calendar" style="color: #A78BFA;"></i>
                    Academic Years
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:term-list' %}">
                    <i class="fas fa-clock" style="color: #A78BFA;"></i>
                    Terms
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:calendar' %}">
                    <i class="fas fa-calendar-week" style="color: #A78BFA;"></i>
                    Academic Calendar
                  </a>
                </li>
              </ul>
            </li>

            <!-- Subjects & Curriculum -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-book-reader" style="color: #8B5CF6;"></i>
                <span class="hide-menu">Curriculum</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'subjects:subject-list' %}">
                    <i class="fas fa-book" style="color: #A78BFA;"></i>
                    Subjects
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'subjects:syllabus-list' %}">
                    <i class="fas fa-list-alt" style="color: #A78BFA;"></i>
                    Syllabus Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'subjects:curriculum-structure' %}">
                    <i class="fas fa-project-diagram" style="color: #A78BFA;"></i>
                    Curriculum Structure
                  </a>
                </li>
              </ul>
            </li>

            <!-- Scheduling -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-calendar-week" style="color: #8B5CF6;"></i>
                <span class="hide-menu">Scheduling</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:timetable_list' %}">
                    <i class="fas fa-table" style="color: #A78BFA;"></i>
                    Timetables
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:timeslot_list' %}">
                    <i class="fas fa-clock" style="color: #A78BFA;"></i>
                    Time Slots
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:room_list' %}">
                    <i class="fas fa-door-closed" style="color: #A78BFA;"></i>
                    Room Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:conflict_management' %}">
                    <i class="fas fa-exclamation-triangle" style="color: #A78BFA;"></i>
                    Conflict Resolution
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üìö Learning & Assessment -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-4" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üìö Learning & Assessment</span>
            </li>

            <!-- Assignments -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-clipboard-list" style="color: #F59E0B;"></i>
                <span class="hide-menu">Assignments</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'assignments:assignment_list' %}">
                    <i class="fas fa-list" style="color: #FBBF24;"></i>
                    All Assignments
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'assignments:assignment_create' %}">
                    <i class="fas fa-plus-circle" style="color: #FBBF24;"></i>
                    Create Assignment
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'assignments:grading_dashboard' %}">
                    <i class="fas fa-pen-fancy" style="color: #FBBF24;"></i>
                    Grading Dashboard
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'assignments:assignment_templates' %}">
                    <i class="fas fa-copy" style="color: #FBBF24;"></i>
                    Templates
                  </a>
                </li>
              </ul>
            </li>

            <!-- Examinations -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-clipboard-check" style="color: #F59E0B;"></i>
                <span class="hide-menu">Examinations</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'exams:exam_list' %}">
                    <i class="fas fa-list" style="color: #FBBF24;"></i>
                    All Exams
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'exams:create_exam' %}">
                    <i class="fas fa-plus-circle" style="color: #FBBF24;"></i>
                    Create Exam
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'exams:question_bank' %}">
                    <i class="fas fa-question-circle" style="color: #FBBF24;"></i>
                    Question Bank
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'exams:my_results' %}">
                    <i class="fas fa-poll" style="color: #FBBF24;"></i>
                    Results Entry
                  </a>
                </li>
              </ul>
            </li>

            <!-- Attendance -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-calendar-check" style="color: #F59E0B;"></i>
                <span class="hide-menu">Attendance</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'attendance:mark-attendance' %}">
                    <i class="fas fa-check-circle" style="color: #FBBF24;"></i>
                    Mark Attendance
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'attendance:record-list' %}">
                    <i class="fas fa-list" style="color: #FBBF24;"></i>
                    Attendance Records
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'attendance:dashboard' %}">
                    <i class="fas fa-chart-bar" style="color: #FBBF24;"></i>
                    Attendance Dashboard
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üí∞ Finance & Fees -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-5" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üí∞ Finance & Fees</span>
            </li>

            <!-- Fee Management -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-money-bill-wave" style="color: #059669;"></i>
                <span class="hide-menu">Fee Management</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:fee-structure-list' %}">
                    <i class="fas fa-list-ol" style="color: #10B981;"></i>
                    Fee Structures
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:fee-category-list' %}">
                    <i class="fas fa-tags" style="color: #10B981;"></i>
                    Fee Categories
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:special-fee-list' %}">
                    <i class="fas fa-plus-circle" style="color: #10B981;"></i>
                    Special Fees
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:scholarship-list' %}">
                    <i class="fas fa-hand-holding-usd" style="color: #10B981;"></i>
                    Scholarships
                  </a>
                </li>
              </ul>
            </li>

            <!-- Billing & Payments -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-file-invoice-dollar" style="color: #059669;"></i>
                <span class="hide-menu">Billing & Payments</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:invoice-list' %}">
                    <i class="fas fa-file-invoice" style="color: #10B981;"></i>
                    Invoices
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:invoice-generate' %}">
                    <i class="fas fa-plus" style="color: #10B981;"></i>
                    Generate Invoice
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:payment-list' %}">
                    <i class="fas fa-credit-card" style="color: #10B981;"></i>
                    Payments
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:payment-process' %}">
                    <i class="fas fa-money-check-alt" style="color: #10B981;"></i>
                    Process Payment
                  </a>
                </li>
              </ul>
            </li>

            <!-- Financial Reports -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-chart-pie" style="color: #059669;"></i>
                <span class="hide-menu">Financial Reports</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:collection-report' %}">
                    <i class="fas fa-chart-area" style="color: #10B981;"></i>
                    Collection Reports
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:defaulters-report' %}">
                    <i class="fas fa-exclamation-triangle" style="color: #10B981;"></i>
                    Defaulters Report
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'finance:analytics' %}">
                    <i class="fas fa-chart-line" style="color: #10B981;"></i>
                    Financial Analytics
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üè¢ Operations -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-6" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üè¢ Operations</span>
            </li>

            <!-- Library Operations -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-book" style="color: #6366F1;"></i>
                <span class="hide-menu">Library</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-books" style="color: #818CF8;"></i>
                    Book Catalog
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-hand-paper" style="color: #818CF8;"></i>
                    Issue/Return Books
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-exclamation-triangle" style="color: #818CF8;"></i>
                    Fine Management
                  </a>
                </li>
              </ul>
            </li>

            <!-- Transport Management -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-bus" style="color: #6366F1;"></i>
                <span class="hide-menu">Transport</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-route" style="color: #818CF8;"></i>
                    Route Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-truck" style="color: #818CF8;"></i>
                    Vehicle Management
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="#">
                    <i class="fas fa-id-badge" style="color: #818CF8;"></i>
                    Driver Management
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üì¢ Communications -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-7" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üì¢ Communications</span>
            </li>

            <!-- Messaging -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-envelope" style="color: #EC4899;"></i>
                <span class="hide-menu">Messaging</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:thread_list' %}">
                    <i class="fas fa-comments" style="color: #F472B6;"></i>
                    Messages
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:thread_create' %}">
                    <i class="fas fa-paper-plane" style="color: #F472B6;"></i>
                    Send Message
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:announcement_list' %}">
                    <i class="fas fa-bullhorn" style="color: #F472B6;"></i>
                    Announcements
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:bulk_message_create' %}">
                    <i class="fas fa-broadcast-tower" style="color: #F472B6;"></i>
                    Bulk Messaging
                  </a>
                </li>
              </ul>
            </li>

            <!-- Notifications -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-bell" style="color: #EC4899;"></i>
                <span class="hide-menu">Notifications</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:notifications_overview' %}">
                    <i class="fas fa-bell" style="color: #F472B6;"></i>
                    All Notifications
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:quick_notification' %}">
                    <i class="fas fa-bolt" style="color: #F472B6;"></i>
                    Quick Notification
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'communications:template_list' %}">
                    <i class="fas fa-copy" style="color: #F472B6;"></i>
                    Message Templates
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- üìä Reports & Analytics -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-8" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">üìä Reports & Analytics</span>
            </li>

            <!-- Academic Analytics -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-chart-line" style="color: #14B8A6;"></i>
                <span class="hide-menu">Academic Analytics</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:student_analytics' %}">
                    <i class="fas fa-user-graduate" style="color: #2DD4BF;"></i>
                    Student Performance
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:class_analytics' %}">
                    <i class="fas fa-chalkboard" style="color: #2DD4BF;"></i>
                    Class Performance
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:teacher_analytics' %}">
                    <i class="fas fa-user-tie" style="color: #2DD4BF;"></i>
                    Teacher Analytics
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:attendance_analytics' %}">
                    <i class="fas fa-calendar-check" style="color: #2DD4BF;"></i>
                    Attendance Analytics
                  </a>
                </li>
              </ul>
            </li>

            <!-- Reports Generation -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-file-alt" style="color: #14B8A6;"></i>
                <span class="hide-menu">Reports</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:reports' %}">
                    <i class="fas fa-list" style="color: #2DD4BF;"></i>
                    All Reports
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:generate_report' %}">
                    <i class="fas fa-plus-circle" style="color: #2DD4BF;"></i>
                    Generate Report
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'academics:analytics' %}">
                    <i class="fas fa-chart-bar" style="color: #2DD4BF;"></i>
                    Academic Reports
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:analytics' %}">
                    <i class="fas fa-calendar" style="color: #2DD4BF;"></i>
                    Scheduling Reports
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>

        <!-- ================================== -->
        <!-- ‚öôÔ∏è System Administration -->
        <!-- ================================== -->
        <nav class="sidebar-nav" id="menu-right-mini-9" data-simplebar>
          <ul class="sidebar-menu">
            <li class="nav-small-cap">
              <span class="hide-menu">‚öôÔ∏è System Administration</span>
            </li>

            <!-- System Settings -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-sliders-h" style="color: #EF4444;"></i>
                <span class="hide-menu">Settings</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:settings' %}">
                    <i class="fas fa-cog" style="color: #F87171;"></i>
                    System Configuration
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:system_admin' %}">
                    <i class="fas fa-tools" style="color: #F87171;"></i>
                    System Administration
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'scheduling:settings' %}">
                    <i class="fas fa-calendar-alt" style="color: #F87171;"></i>
                    Scheduling Settings
                  </a>
                </li>
              </ul>
            </li>

            <!-- Audit & Monitoring -->
            <li class="sidebar-item">
              <a class="sidebar-link has-arrow" href="javascript:void(0)" aria-expanded="false">
                <i class="fas fa-clipboard-list" style="color: #EF4444;"></i>
                <span class="hide-menu">Audit & Logs</span>
              </a>
              <ul aria-expanded="false" class="collapse first-level">
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:audit_logs' %}">
                    <i class="fas fa-search" style="color: #F87171;"></i>
                    Audit Trail
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:system_health' %}">
                    <i class="fas fa-heartbeat" style="color: #F87171;"></i>
                    System Health
                  </a>
                </li>
                <li class="sidebar-item">
                  <a class="sidebar-link" href="{% url 'core:user_management' %}">
                    <i class="fas fa-users-cog" style="color: #F87171;"></i>
                    User Activity Monitor
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</aside>

<script>
  // Sidebar navigation functionality
  document.addEventListener('DOMContentLoaded', function () {
    // Mini navigation items
    const miniNavItems = document.querySelectorAll('.mini-nav-item');
    const sidebarMenus = document.querySelectorAll('.sidebar-nav');

    // Hide all sidebar menus initially except the first one
    sidebarMenus.forEach((menu, index) => {
      if (index !== 0) {
        menu.style.display = 'none';
      }
    });

    // Add click event listeners to mini nav items
    miniNavItems.forEach((item, index) => {
      item.addEventListener('click', function () {
        // Remove active class from all mini nav items
        miniNavItems.forEach(navItem => navItem.classList.remove('mm-active'));

        // Add active class to clicked item
        this.classList.add('mm-active');

        // Hide all sidebar menus
        sidebarMenus.forEach(menu => menu.style.display = 'none');

        // Show corresponding sidebar menu
        const targetMenu = document.getElementById(`menu-right-mini-${index + 1}`);
        if (targetMenu) {
          targetMenu.style.display = 'block';
        }
      });
    });

    // Handle collapsible menus
    const hasArrowLinks = document.querySelectorAll('.sidebar-link.has-arrow');
    hasArrowLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const parentLi = this.parentElement;
        const submenu = parentLi.querySelector('ul');

        if (submenu) {
          const isOpen = submenu.classList.contains('show');

          // Close all other submenus at the same level
          const siblingMenus = parentLi.parentElement.querySelectorAll('li > ul');
          siblingMenus.forEach(menu => {
            if (menu !== submenu) {
              menu.classList.remove('show');
              menu.parentElement.classList.remove('mm-active');
            }
          });

          // Toggle current submenu
          if (isOpen) {
            submenu.classList.remove('show');
            parentLi.classList.remove('mm-active');
          } else {
            submenu.classList.add('show');
            parentLi.classList.add('mm-active');
          }
        }
      });
    });

    // Set active states based on current URL
    const currentPath = window.location.pathname;
    const allLinks = document.querySelectorAll('.sidebar-link:not(.has-arrow)');

    allLinks.forEach(link => {
      if (link.getAttribute('href') === currentPath) {
        // Mark link as active
        link.classList.add('active');

        // Mark parent menu items as active
        let parent = link.closest('ul.collapse');
        while (parent) {
          parent.classList.add('show');
          const parentLi = parent.parentElement;
          parentLi.classList.add('mm-active');
          parent = parentLi.closest('ul.collapse');
        }

        // Determine which main navigation should be active
        const sidebarNav = link.closest('.sidebar-nav');
        if (sidebarNav) {
          const navId = sidebarNav.id;
          const miniIndex = navId.split('-').pop();
          const miniNavItem = document.querySelector(`#mini-${miniIndex}`);
          if (miniNavItem) {
            miniNavItems.forEach(item => item.classList.remove('mm-active'));
            miniNavItem.classList.add('mm-active');

            sidebarMenus.forEach(menu => menu.style.display = 'none');
            sidebarNav.style.display = 'block';
          }
        }
      }
    });
  });
</script>

<style>
  /* Enhanced sidebar styles */
  .sidebar-nav {
    transition: all 0.3s ease;
  }

  .sidebar-menu .nav-small-cap .hide-menu {
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
  }

  .sidebar-item.mm-active>.sidebar-link {
    background-color: rgba(99, 102, 241, 0.1);
    color: #6366F1;
    border-radius: 8px;
  }

  .sidebar-link.active {
    background-color: #6366F1;
    color: white !important;
    border-radius: 8px;
  }

  .sidebar-link.active i {
    color: white !important;
  }

  .mini-nav-item.mm-active {
    background-color: rgba(99, 102, 241, 0.1);
    border-radius: 8px;
  }

  .collapse.show {
    display: block !important;
  }

  .sidebar-link:hover {
    background-color: rgba(99, 102, 241, 0.05);
    border-radius: 8px;
    transition: all 0.2s ease;
  }

  /* Icon spacing */
  .sidebar-link i {
    width: 20px;
    margin-right: 10px;
    display: inline-block;
    text-align: center;
  }

  /* Submenu indentation */
  .first-level .sidebar-link {
    padding-left: 3rem;
  }

  /* Badge for notifications */
  .notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #EF4444;
    color: white;
    border-radius: 50%;
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
  }

  /* Responsive improvements */
  @media (max-width: 1199px) {
    .mini-nav-item {
      margin-bottom: 0.5rem;
    }
  }
</style>